<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Control — US Construction Marketing</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <!-- Favicon: MC monogram -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='4' fill='%230073EA'/><text x='16' y='22' font-family='Inter,sans-serif' font-size='14' font-weight='700' fill='white' text-anchor='middle'>MC</text></svg>">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: '#292F4C',
                        'navy-light': '#3D4463',
                        'navy-dark': '#1C1F35',
                        accent: '#0073EA',
                        'accent-hover': '#0060C0',
                        'accent-light': '#E6F4FF',
                    },
                    fontFamily: {
                        body: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
                    },
                },
            },
        }
    </script>
</head>
<body class="font-body" x-data="dashboard" x-init="init()">
    <!-- Sidebar -->
    <aside class="fixed left-0 top-0 h-full w-[240px] sidebar-gradient text-white z-30 flex flex-col"
           :class="sidebarOpen ? '' : '-translate-x-full lg:translate-x-0'"
           style="transition: transform 0.2s">
        <!-- Logo -->
        <div class="px-4 py-4 border-b border-white/[0.08]">
            <div class="flex items-center gap-2.5">
                <div class="w-7 h-7 rounded bg-[#0073EA] flex items-center justify-center flex-shrink-0">
                    <span class="text-[10px] font-bold text-white">MC</span>
                </div>
                <div>
                    <h1 class="text-[13px] font-semibold leading-tight">Mission Control</h1>
                    <p class="text-[10px] text-white/35 mt-0.5">US Construction Marketing</p>
                </div>
            </div>
        </div>

        <!-- Company Filter -->
        <div class="px-4 py-3 border-b border-white/[0.08]">
            <label class="text-[10px] uppercase tracking-wider text-white/30 mb-1.5 block font-medium">Workspace</label>
            <div class="company-indicator" :style="'--company-color:' + getActiveCompanyColor()">
                <select x-model="activeCompany" @change="onCompanyChange()"
                        class="w-full company-select text-[12px] text-white/80 rounded px-2.5 py-1.5 focus:outline-none appearance-none cursor-pointer pr-8"
                        :style="activeCompany ? 'border-color:' + getActiveCompanyColor() : ''">
                    <option value="">All Companies</option>
                    <template x-for="(co, key) in companies" :key="key">
                        <option :value="co.slug" x-text="co.name"></option>
                    </template>
                </select>
            </div>
        </div>

        <!-- Nav -->
        <nav class="flex-1 py-2 overflow-y-auto px-2">
            <template x-for="item in navItems" :key="item.hash">
                <a :href="item.hash"
                   class="flex items-center gap-2.5 px-3 py-[7px] text-[13px] rounded transition-all duration-100"
                   :class="currentPage === item.page ? 'nav-active text-white font-medium' : 'text-white/50 hover:bg-white/[0.06] hover:text-white/80'"
                   @click="sidebarOpen = false">
                    <i :data-lucide="item.icon" class="w-4 h-4 flex-shrink-0"></i>
                    <span x-text="item.label"></span>
                </a>
            </template>
        </nav>

        <!-- Footer -->
        <div class="px-4 py-3 border-t border-white/[0.08] text-[10px] text-white/25">
            <p>v1.0 &middot; Demo</p>
        </div>
    </aside>

    <!-- Mobile hamburger -->
    <button @click="sidebarOpen = !sidebarOpen"
            class="lg:hidden fixed top-3 left-3 z-40 bg-[#292F4C] text-white p-2 rounded shadow-md">
        <i data-lucide="menu" class="w-4 h-4"></i>
    </button>

    <!-- Overlay -->
    <div x-show="sidebarOpen" @click="sidebarOpen = false"
         class="lg:hidden fixed inset-0 bg-black/30 z-20" x-transition.opacity></div>

    <!-- Main Content -->
    <main class="lg:ml-[240px] min-h-screen bg-[#F6F7FB]">
        <!-- Top Bar -->
        <header class="bg-white border-b border-[#E6E9EF] px-6 py-2.5 flex items-center justify-between sticky top-0 z-10">
            <div class="flex items-center gap-2">
                <h2 class="text-[15px] font-semibold text-[#323338]" x-text="pageTitle"></h2>
                <span class="text-[12px] text-[#676879] hidden sm:inline" x-text="pageSubtitle ? '— ' + pageSubtitle : ''"></span>
            </div>
            <div class="flex items-center gap-3">
                <span class="text-[12px] text-[#676879]" x-text="new Date().toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' })"></span>
            </div>
        </header>

        <!-- Page Container -->
        <div id="page-container" class="p-5 lg:p-6 page-fade page-fade-active">
            <!-- Home -->
            <div x-show="currentPage === 'home'" x-cloak>
                <div id="page-home"></div>
            </div>

            <!-- Calendar -->
            <div x-show="currentPage === 'calendar'" x-cloak>
                <div id="page-calendar"></div>
            </div>

            <!-- Post Detail -->
            <div x-show="currentPage === 'post-detail'" x-cloak>
                <div id="page-post-detail"></div>
            </div>

            <!-- Content Library -->
            <div x-show="currentPage === 'content'" x-cloak>
                <div id="page-content"></div>
            </div>

            <!-- Google Business Profile -->
            <div x-show="currentPage === 'gbp'" x-cloak>
                <div id="page-gbp"></div>
            </div>

            <!-- AEO/GEO Engine -->
            <div x-show="currentPage === 'aeo'" x-cloak>
                <div id="page-aeo"></div>
            </div>

            <!-- Reviews -->
            <div x-show="currentPage === 'reviews'" x-cloak>
                <div id="page-reviews"></div>
            </div>

            <!-- Brand Audit -->
            <div x-show="currentPage === 'brand-audit'" x-cloak>
                <div id="page-brand-audit"></div>
            </div>

            <!-- Visual Assets -->
            <div x-show="currentPage === 'assets'" x-cloak>
                <div id="page-assets"></div>
            </div>

            <!-- Reactivation -->
            <div x-show="currentPage === 'reactivation'" x-cloak>
                <div id="page-reactivation"></div>
            </div>

            <!-- Settings -->
            <div x-show="currentPage === 'settings'" x-cloak>
                <div id="page-settings"></div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="/static/js/api.js"></script>
    <script src="/static/js/pages/home.js"></script>
    <script src="/static/js/pages/calendar.js"></script>
    <script src="/static/js/pages/post-detail.js"></script>
    <script src="/static/js/pages/content.js"></script>
    <script src="/static/js/pages/reactivation.js"></script>
    <script src="/static/js/pages/gbp.js"></script>
    <script src="/static/js/pages/aeo.js"></script>
    <script src="/static/js/pages/reviews.js"></script>
    <script src="/static/js/pages/brand-audit.js"></script>
    <script src="/static/js/pages/assets.js"></script>
    <script src="/static/js/pages/settings.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
